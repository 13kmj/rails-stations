<!DOCTYPE html>
<html>

<% flash.each do |key, message| %>
  <div class="<%= key %>"><%= message %></div>
<% end %>

<h1>映画一覧</h1>

<h2>検索</h2>
<%= form_with url: movies_path, method: :get, local: true do |form| %>
  <h3>映画から検索</h3>
    <%= form.text_field :keyword, placeholder: "キーワード" %>
    <%= form.radio_button :is_showing, "", checked: true %> すべて
    <%= form.radio_button :is_showing, "1" %> 公開中
    <%= form.radio_button :is_showing, "0" %> 公開予定
  <h3>劇場から検索</h3>
    <%= form.text_field :theater, placeholder: "住所・劇場名から検索" %>
  <%= form.submit "検索" %>
<% end %>

  <table>
    <tr>
      <th>ID</th>
      <th>タイトル</th>
      <th>公開年</th>
      <th>上映中</th>
      <th>概要</th>
      <th>画像URL</th>
      <th>劇場：スクリーン</th>
      <th>登録日時</th>
      <th>更新日時</th>
    </tr>
    <% @movies.each do |movie| %>
    <tr>
      <td><%= link_to movie.id, movie_path(movie) %></td>
      <td><%= movie.name %></td>
      <td><%= movie.year %></td>
      <td><%= movie.is_showing ? '上映中' : '上映予定' %></td>
      <td><%= movie.description %></td>
      <td><img src="<%= movie.image_url %>" alt="Movie poster"></td>
      <td><%=  movie.theater.name %>：<%= movie.screen.screen_number %></td>
      <td><%= movie.created_at %></td>
      <td><%= movie.updated_at %></td>
    </tr>
    <% end %>
  </table>
</html>